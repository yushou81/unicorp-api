# 课程模块API测试计划

## 1. 测试环境准备

### 1.1 测试环境
- 测试服务器: 本地开发环境或测试服务器
- 测试数据库: 测试专用数据库实例
- API基础URL: http://localhost:8080/api (可根据实际环境调整)

### 1.2 测试工具
- Postman: 用于API测试的主要工具
- 测试数据: 预先准备的测试数据集

## 2. 测试准备

### 2.1 导入Postman集合
1. 打开Postman应用程序
2. 点击左上角的"Import"按钮
3. 选择"File" > "Upload Files"
4. 选择`docs/postman/unicorp_api_tests.json`文件
5. 点击"Import"完成导入

### 2.2 配置环境变量
1. 在Postman中创建一个新环境（例如"UniCorp API测试环境"）
2. 设置以下环境变量:
   - `base_url`: API基础URL，例如`http://localhost:8080/api`
   - `student_token`: 学生用户的JWT令牌
   - `teacher_token`: 教师用户的JWT令牌
   - `school_admin_token`: 学校管理员的JWT令牌
   - `enterprise_mentor_token`: 企业导师的JWT令牌

### 2.3 获取测试用户令牌
1. 使用系统的登录API获取各类用户的JWT令牌
2. 将获取到的令牌填入对应的环境变量中

## 3. 测试流程

### 3.1 课程出勤管理测试
1. 创建课程出勤记录
   - 使用教师账号登录
   - 执行"记录课程出勤"请求
   - 验证返回状态码为200，并记录返回的出勤ID
   
2. 获取课程出勤记录
   - 执行"获取课程某天的出勤记录"请求
   - 验证返回状态码为200，并验证返回数据包含刚才创建的出勤记录
   
3. 更新出勤记录
   - 执行"更新出勤记录"请求，更新之前创建的出勤记录
   - 验证返回状态码为200，并验证返回数据中的状态已更新
   
4. 获取出勤统计
   - 执行"获取课程出勤统计"请求
   - 验证返回状态码为200，并验证返回数据包含有效的统计信息
   
5. 删除出勤记录
   - 执行"删除出勤记录"请求
   - 验证返回状态码为200，并验证返回结果为true

### 3.2 课程章节管理测试
1. 创建课程章节
   - 使用教师账号登录
   - 执行"创建课程章节"请求
   - 验证返回状态码为200，并记录返回的章节ID
   
2. 获取章节详情
   - 执行"获取章节详情"请求
   - 验证返回状态码为200，并验证返回数据与创建时的数据一致
   
3. 更新章节信息
   - 执行"更新课程章节"请求
   - 验证返回状态码为200，并验证返回数据中的信息已更新
   
4. 更新章节发布状态
   - 执行"更新章节发布状态"请求
   - 验证返回状态码为200，并验证返回数据中的发布状态已更新
   
5. 关联资源到章节
   - 执行"关联资源到章节"请求
   - 验证返回状态码为200，并验证返回结果为true
   
6. 获取章节关联的资源列表
   - 执行"获取章节关联的资源列表"请求
   - 验证返回状态码为200，并验证返回数据包含刚才关联的资源ID
   
7. 从章节中移除资源
   - 执行"从章节中移除资源"请求
   - 验证返回状态码为200，并验证返回结果为true
   
8. 删除章节
   - 执行"删除课程章节"请求
   - 验证返回状态码为200，并验证返回结果为true

### 3.3 课程问答管理测试
1. 学生提问
   - 使用学生账号登录
   - 执行"学生提问"请求
   - 验证返回状态码为200，并记录返回的问题ID
   
2. 获取问题详情
   - 执行"获取问题详情"请求
   - 验证返回状态码为200，并验证返回数据与提问时的数据一致
   
3. 教师回答问题
   - 使用教师账号登录
   - 执行"教师回答问题"请求
   - 验证返回状态码为200，并验证返回数据中包含回答内容
   
4. 获取课程问题列表
   - 执行"获取课程问题列表"请求
   - 验证返回状态码为200，并验证返回数据包含刚才创建的问题
   
5. 更新问题
   - 使用学生账号登录
   - 执行"更新问题"请求
   - 验证返回状态码为200，并验证返回数据中的问题内容已更新
   
6. 删除问题
   - 执行"删除问题"请求
   - 验证返回状态码为200，并验证返回结果为true

### 3.4 课程讨论管理测试
1. 创建讨论
   - 使用学生账号登录
   - 执行"创建讨论"请求
   - 验证返回状态码为200，并记录返回的讨论ID
   
2. 回复讨论
   - 执行"回复讨论"请求
   - 验证返回状态码为200，并验证返回数据包含回复内容
   
3. 获取讨论详情
   - 执行"获取讨论详情"请求
   - 验证返回状态码为200，并验证返回数据与创建时的数据一致
   
4. 获取讨论回复
   - 执行"获取讨论回复"请求
   - 验证返回状态码为200，并验证返回数据包含刚才创建的回复
   
5. 更新讨论内容
   - 执行"更新讨论内容"请求
   - 验证返回状态码为200，并验证返回数据中的讨论内容已更新
   
6. 删除讨论
   - 执行"删除讨论"请求
   - 验证返回状态码为200，并验证返回结果为true

### 3.5 课程评价管理测试
1. 提交课程评价
   - 使用学生账号登录
   - 执行"提交课程评价"请求
   - 验证返回状态码为200，并记录返回的评价ID
   
2. 获取课程评价详情
   - 执行"获取课程评价详情"请求
   - 验证返回状态码为200，并验证返回数据与提交时的数据一致
   
3. 更新课程评价
   - 执行"更新课程评价"请求
   - 验证返回状态码为200，并验证返回数据中的评价内容已更新
   
4. 获取课程平均评分
   - 执行"获取课程平均评分"请求
   - 验证返回状态码为200，并验证返回数据是有效的评分值
   
5. 删除课程评价
   - 执行"删除课程评价"请求
   - 验证返回状态码为200

### 3.6 课程资源管理测试
1. 上传课程资源
   - 使用教师账号登录
   - 执行"上传课程资源"请求
   - 验证返回状态码为200，并记录返回的资源ID
   
2. 获取课程资源详情
   - 执行"获取课程资源详情"请求
   - 验证返回状态码为200，并验证返回数据与上传时的数据一致
   
3. 获取课程资源列表
   - 执行"获取课程资源列表"请求
   - 验证返回状态码为200，并验证返回数据包含刚才上传的资源
   
4. 下载课程资源
   - 执行"下载课程资源"请求
   - 验证返回状态码为200，并验证返回的是有效的文件内容
   
5. 删除课程资源
   - 执行"删除课程资源"请求
   - 验证返回状态码为200

### 3.7 双师课堂管理测试
1. 创建双师课堂课程
   - 使用教师账号登录
   - 执行"创建双师课堂课程"请求
   - 验证返回状态码为200，并记录返回的课程ID
   
2. 获取双师课堂课程详情
   - 执行"获取双师课堂课程详情"请求
   - 验证返回状态码为200，并验证返回数据与创建时的数据一致
   
3. 更新课程信息
   - 执行"更新双师课堂课程信息"请求
   - 验证返回状态码为200，并验证返回数据中的课程信息已更新
   
4. 更新课程状态
   - 执行"更新课程状态"请求
   - 验证返回状态码为200，并验证返回数据中的课程状态已更新
   
5. 学生报名课程
   - 使用学生账号登录
   - 执行"学生报名课程"请求
   - 验证返回状态码为200
   
6. 获取学生已报名的课程列表
   - 执行"获取学生已报名的课程列表"请求
   - 验证返回状态码为200，并验证返回数据包含刚才报名的课程
   
7. 获取课程学生列表
   - 使用教师账号登录
   - 执行"获取课程学生列表"请求
   - 验证返回状态码为200，并验证返回数据包含刚才报名的学生
   
8. 学生取消报名
   - 使用学生账号登录
   - 执行"学生取消报名"请求
   - 验证返回状态码为200
   
9. 删除双师课堂课程
   - 使用教师账号登录
   - 执行"删除双师课堂课程"请求
   - 验证返回状态码为200

### 3.8 学习进度管理测试
1. 更新学习进度
   - 使用学生账号登录
   - 执行"更新学习进度"请求
   - 验证返回状态码为200，并记录返回的进度ID
   
2. 获取学生章节进度
   - 执行"获取学生章节进度"请求
   - 验证返回状态码为200，并验证返回数据与更新时的数据一致
   
3. 获取学生课程进度
   - 执行"获取学生课程进度"请求
   - 验证返回状态码为200，并验证返回数据包含刚才更新的章节进度
   
4. 获取学生课程完成率
   - 执行"获取学生课程完成率"请求
   - 验证返回状态码为200，并验证返回数据是有效的完成率值
   
5. 初始化章节学习进度
   - 使用教师账号登录
   - 执行"初始化章节学习进度"请求
   - 验证返回状态码为200，并验证返回结果为true

## 4. 边界条件和异常测试

### 4.1 权限测试
- 使用无权限的用户尝试执行需要特定权限的操作，验证返回状态码为403

### 4.2 参数验证测试
- 提交缺少必要参数的请求，验证返回状态码为400
- 提交无效参数的请求，验证返回状态码为400

### 4.3 资源不存在测试
- 尝试获取、更新或删除不存在的资源，验证返回状态码为404

## 5. 测试报告

测试完成后，记录以下信息：
- 测试通过的API数量和比例
- 测试失败的API列表及原因
- 发现的问题和建议的修复方案
- 测试环境和条件

## 6. 使用Postman进行测试的注意事项

1. **环境变量设置**
   - 确保在每次测试前检查环境变量是否正确设置
   - 特别是确认各类用户的token是否有效

2. **测试数据依赖**
   - 部分测试需要依赖之前测试创建的数据
   - 可以使用Postman的环境变量来存储测试过程中创建的资源ID

3. **测试顺序**
   - 按照本文档的顺序进行测试，确保数据依赖关系正确
   - 创建操作应在查询、更新和删除操作之前执行

4. **自动化测试**
   - 可以使用Postman的Collection Runner功能进行自动化测试
   - 为每个请求添加测试脚本，验证返回状态码和数据

5. **测试数据清理**
   - 测试完成后，使用删除API清理测试过程中创建的数据
   - 或者使用专门的测试数据库，测试后重置数据库状态 