# 岗位分类关系调整测试计划

## 背景

在第8次迭代中，我们调整了岗位与分类的关系，使一个岗位只对应一个三级分类，而不是多个分类。这个测试计划旨在验证这一变更是否正确实现。

## 测试范围

1. 岗位创建功能
2. 岗位更新功能
3. 岗位详情查询功能
4. 岗位列表查询功能

## 测试用例

### 1. 岗位创建测试

#### 1.1 正常创建岗位

**步骤：**
1. 以企业管理员或企业导师身份登录
2. 调用创建岗位API，提供一个有效的三级分类ID
3. 验证岗位创建成功

**预期结果：**
- 返回状态码201
- 返回成功消息和新创建的岗位ID
- 岗位与提供的三级分类建立关联

#### 1.2 使用非三级分类创建岗位

**步骤：**
1. 以企业管理员或企业导师身份登录
2. 调用创建岗位API，提供一个一级或二级分类ID
3. 验证系统返回错误

**预期结果：**
- 返回状态码400
- 返回错误消息："岗位分类必须是三级分类"

#### 1.3 不提供分类ID创建岗位

**步骤：**
1. 以企业管理员或企业导师身份登录
2. 调用创建岗位API，不提供分类ID
3. 验证系统返回错误

**预期结果：**
- 返回状态码400
- 返回错误消息："岗位分类不能为空"

### 2. 岗位更新测试

#### 2.1 正常更新岗位

**步骤：**
1. 以企业管理员或企业导师身份登录
2. 调用更新岗位API，提供一个有效的三级分类ID
3. 验证岗位更新成功

**预期结果：**
- 返回状态码200
- 返回成功消息
- 岗位与新提供的三级分类建立关联，原有关联被删除

#### 2.2 使用非三级分类更新岗位

**步骤：**
1. 以企业管理员或企业导师身份登录
2. 调用更新岗位API，提供一个一级或二级分类ID
3. 验证系统返回错误

**预期结果：**
- 返回状态码400
- 返回错误消息："岗位分类必须是三级分类"

### 3. 岗位详情查询测试

**步骤：**
1. 创建一个带有三级分类的岗位
2. 调用获取岗位详情API
3. 验证返回的岗位信息中只包含一个分类

**预期结果：**
- 返回状态码200
- 返回的JobVO对象中有category字段，包含三级分类信息
- 不存在categories字段

### 4. 岗位列表查询测试

**步骤：**
1. 创建多个带有不同三级分类的岗位
2. 调用获取岗位列表API
3. 验证返回的每个岗位信息中只包含一个分类

**预期结果：**
- 返回状态码200
- 返回的每个JobVO对象中都有category字段，包含三级分类信息
- 不存在categories字段

## Postman测试方法

### 准备工作

1. 打开Postman
2. 导入API集合（如果有）
3. 确保已设置环境变量，包括API基础URL和认证token

### 测试步骤

#### 1. 创建岗位测试

**请求：**
```
POST {{baseUrl}}/api/v1/jobs
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "测试岗位",
  "description": "这是一个测试岗位",
  "location": "长沙",
  "salaryMin": 5,
  "salaryMax": 10,
  "salaryUnit": "per_month",
  "jobType": "full_time",
  "headcount": 2,
  "educationRequirement": "bachelor",
  "experienceRequirement": "fresh_graduate",
  "applicationDeadline": "2024-12-31",
  "tags": "五险一金,双休",
  "jobRequirements": "熟悉Java编程语言",
  "jobBenefits": "提供免费午餐",
  "categoryId": 12  // 使用一个有效的三级分类ID
}
```

**验证：**
- 检查响应状态码是否为201
- 检查返回的data字段是否包含新创建岗位的ID

#### 2. 获取岗位详情测试

**请求：**
```
GET {{baseUrl}}/api/v1/jobs/{id}
```

**验证：**
- 检查响应状态码是否为200
- 检查返回的data字段中是否有category字段，而不是categories字段
- 检查category字段是否包含正确的三级分类信息

#### 3. 更新岗位测试

**请求：**
```
PUT {{baseUrl}}/api/v1/jobs/{id}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "更新后的测试岗位",
  "description": "这是更新后的测试岗位",
  "location": "长沙",
  "salaryMin": 6,
  "salaryMax": 12,
  "salaryUnit": "per_month",
  "jobType": "full_time",
  "headcount": 3,
  "educationRequirement": "bachelor",
  "experienceRequirement": "fresh_graduate",
  "applicationDeadline": "2024-12-31",
  "tags": "五险一金,双休",
  "jobRequirements": "熟悉Java编程语言",
  "jobBenefits": "提供免费午餐",
  "categoryId": 15  // 使用另一个有效的三级分类ID
}
```

**验证：**
- 检查响应状态码是否为200
- 再次获取岗位详情，检查category是否已更新为新的三级分类

## 执行计划

1. 在开发环境中执行所有测试用例
2. 记录测试结果和发现的问题
3. 修复发现的问题
4. 重新测试确认问题已解决
5. 在测试环境中再次验证所有功能 