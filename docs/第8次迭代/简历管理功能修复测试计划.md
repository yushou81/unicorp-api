# 简历管理功能修复测试计划

## 背景

在之前的版本中，系统限制一个用户只能拥有一份简历（user_id唯一约束）。现在我们已经移除了这个约束，允许一个用户拥有多份简历，并相应地调整了API接口。本测试计划旨在验证这些更改是否正确实现。

## 测试目标

1. 验证用户可以创建多份简历
2. 验证可以通过ID查询特定简历
3. 验证可以获取用户的所有简历列表
4. 验证简历的更新和删除功能在多简历场景下正常工作

## 测试环境

- 开发环境：本地开发服务器
- 数据库：MySQL 8.0
- API测试工具：Postman

## 测试用例

### 1. 创建多份简历测试

#### 测试步骤
1. 用户登录系统获取JWT令牌
2. 使用POST `/api/v1/me/resume`创建第一份简历
3. 使用相同的API创建第二份简历
4. 使用GET `/api/v1/me/resumes`获取所有简历

#### 预期结果
- 两次创建简历的请求都应返回200状态码
- 获取所有简历的请求应返回包含两份简历的列表

#### Postman测试
```
// 1. 登录获取token
POST {{baseUrl}}/v1/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "password123"
}

// 保存返回的token

// 2. 创建第一份简历
POST {{baseUrl}}/v1/me/resume
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "major": "计算机科学与技术",
  "educationLevel": "本科",
  "resumeUrl": "http://example.com/resume1.pdf",
  "achievements": "获得校级奖学金"
}

// 3. 创建第二份简历
POST {{baseUrl}}/v1/me/resume
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "major": "软件工程",
  "educationLevel": "硕士",
  "resumeUrl": "http://example.com/resume2.pdf",
  "achievements": "发表学术论文两篇"
}

// 4. 获取所有简历
GET {{baseUrl}}/v1/me/resumes
Authorization: Bearer {{token}}
```

### 2. 通过ID查询简历测试

#### 测试步骤
1. 用户登录系统获取JWT令牌
2. 使用GET `/api/v1/me/resumes`获取所有简历，记录简历ID
3. 使用GET `/api/v1/resumes/{resumeId}`查询特定简历

#### 预期结果
- 查询特定简历的请求应返回200状态码
- 返回的简历信息应与创建时一致

#### Postman测试
```
// 1. 登录获取token (同上)

// 2. 获取所有简历，记录ID
GET {{baseUrl}}/v1/me/resumes
Authorization: Bearer {{token}}

// 3. 查询特定简历
GET {{baseUrl}}/v1/resumes/{{resumeId}}
Authorization: Bearer {{token}}
```

### 3. 更新简历测试

#### 测试步骤
1. 用户登录系统获取JWT令牌
2. 使用GET `/api/v1/me/resumes`获取所有简历，记录简历ID
3. 使用PUT `/api/v1/me/resume/{resumeId}`更新特定简历
4. 再次查询该简历验证更新是否成功

#### 预期结果
- 更新简历的请求应返回200状态码
- 再次查询时，简历信息应已更新

#### Postman测试
```
// 1. 登录获取token (同上)

// 2. 获取所有简历，记录ID (同上)

// 3. 更新特定简历
PUT {{baseUrl}}/v1/me/resume/{{resumeId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "major": "人工智能",
  "achievements": "获得国家级奖学金"
}

// 4. 查询更新后的简历
GET {{baseUrl}}/v1/resumes/{{resumeId}}
Authorization: Bearer {{token}}
```

### 4. 删除简历测试

#### 测试步骤
1. 用户登录系统获取JWT令牌
2. 使用GET `/api/v1/me/resumes`获取所有简历，记录简历ID
3. 使用DELETE `/api/v1/me/resume/{resumeId}`删除特定简历
4. 再次获取所有简历验证删除是否成功

#### 预期结果
- 删除简历的请求应返回200状态码
- 再次获取所有简历时，被删除的简历应不在列表中

#### Postman测试
```
// 1. 登录获取token (同上)

// 2. 获取所有简历，记录ID (同上)

// 3. 删除特定简历
DELETE {{baseUrl}}/v1/me/resume/{{resumeId}}
Authorization: Bearer {{token}}

// 4. 获取所有简历验证删除
GET {{baseUrl}}/v1/me/resumes
Authorization: Bearer {{token}}
```

### 5. 获取指定用户简历列表测试

#### 测试步骤
1. 管理员用户登录系统获取JWT令牌
2. 使用GET `/api/v1/resumes/user/{userId}`获取指定用户的所有简历

#### 预期结果
- 请求应返回200状态码
- 返回的简历列表应包含该用户的所有简历

#### Postman测试
```
// 1. 管理员登录获取token
POST {{baseUrl}}/v1/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

// 2. 获取指定用户的所有简历
GET {{baseUrl}}/v1/resumes/user/{{userId}}
Authorization: Bearer {{token}}
```

## 回归测试

除了上述针对新功能的测试外，还应进行以下回归测试，确保现有功能不受影响：

1. 简历创建时的字段验证
2. 未授权用户访问简历API的权限控制
3. 简历与岗位申请的关联功能

## 测试数据清理

测试完成后，应清理测试过程中创建的测试数据，以保持环境的干净。

## 责任人

- 测试执行：[测试人员姓名]
- 测试监督：[项目经理姓名]

## 测试时间安排

- 测试开始日期：[日期]
- 测试结束日期：[日期]
- 测试报告提交日期：[日期] 